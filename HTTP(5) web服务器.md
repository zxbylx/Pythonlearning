# HTTP(5): web服务器

HTTP/1.1规范允许一台HTTP服务器搭建多个web站点。需要使用虚拟主机的功能。一台物理主机上可以有多个虚拟主机。

一台服务器上托管两个域名，当使用域名解析后，两个域名的IP地址是相同的。在相同的IP地址下，由于虚拟主机可以寄存多个不同主机名和域名的web网站，因此在发送HTTP请求时，必须在Host首部内完整指定主机名和域名URI。

### 通信数据转发程序：代理、网关、隧道

代理是一种由转发功能的应用程序，它扮演了位于服务器和客户端中间人的角色。接收由客户端发送的请求并转发给服务器端，同时也接收服务器端返回的数据转发给客户端。

网关是转发其他服务器通信数据的服务器，接收客户端发送来的请求时，它就像自己拥有资源的源服务器一样对请求进行处理。

隧道是在相隔甚远的客户端和服务器两者之间进行中转，并保持双方通信连接的应用程序。

##### 代理

代理不改变URI，持有资源的服务器被称为源服务器，从源服务器返回的响应经过代理服务器后再传给客户端。

[![UaNOaR.png](https://s1.ax1x.com/2020/07/14/UaNOaR.png)](https://imgchr.com/i/UaNOaR)

使用代理的理由：利用缓存技术减少网络带宽的浏览，阻止内部针对特定网站的访问控制（国外网站被墙）。

缓存代理：代理转发响应时，会预先将资源副本缓存在代理服务器上，当代理再次接收到相同资源请求时，直接将之前缓存的资源作为响应返回。

透明代理：转发请求或响应时，不对报文做任何加工。

##### 网关

[![UaU1ds.png](https://s1.ax1x.com/2020/07/14/UaU1ds.png)](https://imgchr.com/i/UaU1ds)

利用网关可以提高通信的安全性，因为可以在客户端与网关之间的通信线路上加密以确保连接的安全。比如网关可以连接数据库，使用SQL语句查询数据。

##### 隧道

确保客户端能与服务器进行安全通信。不会解析HTTP请求，本身是透明的，不用在意隧道的存在。