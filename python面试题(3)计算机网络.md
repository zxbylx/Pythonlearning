# python面试题(3):计算机网络

### 1.HTTP常见的请求方法

HTTP/1.0时有get方法、post方法、put方法

HTTP/1.1时新增了connect方法、delete方法、head方法、options方法、trace方法

##### OPTIONS

返回服务器针对特定资源所支持的HTTP请求方法，也可以利用想web服务器发送‘*’的请求来测试服务器的功能性

##### GET

向特定的资源发出请求，注意，get方法不应当用于产生副作用的操作中，例如在web application中，其中一个原因是get可能会被网络蜘蛛等随意访问。

##### HEAD

向服务器与get请求相一致的响应，只不过响应体不会被返回。这一方法可以在不必传输整个响应内容的情况下，就可以获取包含在响应小消息头中的元信息。

##### POST

向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据包含在请求体中。post请求可能导致新的资源建立或已有资源的修改。

##### PUT

向指定资源位置上传其最新的内容。

##### DELETE

请求服务器删除request-url所标识的资源

##### TRACE

回显服务器收到的请求，主要用于测试或诊断

##### CONNECT

HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。

注意：

方法名时区分大小写的，当某个请求所针对的资源不支持对应的请求方法时，服务器应当返回状态码405（method not allowed)；当服务器不认识或不支持对应的请求方法时，应返回状态码501（Not Implemented)。

HTTP服务器至少要应该事先GET和HEAD/POST方法，其他都是可选的，此外除上述方法，特定的HTTP服务器支持扩展自定义方法。

### 2.get方法和post方法的区别

常见表象区别

|                  | GET                                                          | POST                                                         |
| ---------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 后退按钮/刷新    | 无害                                                         | 数据会被重新提交（浏览器应该告诉用户数据会被重新提交         |
| 书签             | 可以收藏为书签                                               | 不可收藏为书签                                               |
| 缓存             | 能被缓存                                                     | 不能被缓存                                                   |
| 编码类型         | application/x-www-form-urlencoded                            | application/x-www-form-urlencoded或multipart/form-data。为二进制数据使用多重编码 |
| 历史             | 参数保留在浏览器历史中                                       | 参数不会保留在浏览器历史中                                   |
| 对数据长度的限制 | 是的。当发送数据时，GET方法向URL添加数据；URL的长度时受限制的（URL的最大长度时2048个字符），这是浏览器和服务器限制，和HTTP协议无关 | 无限制                                                       |
| 对数据类型的限制 | 只允许ASCII字符                                              | 没有限制，也允许二进制数据                                   |
| 安全性           | 与post的相比，get的安全性比较差，因为发送的数据时URL的一部分。在发送密码或其他敏感信息时绝对不要使用get。 | post比get更安全，因为参数不会保存着浏览器历史或web服务器日志中。 |
| 可见性           | 数据在url中对所有人是可见的                                  | 数据不会显示在url中。                                        |

上面都是表象区别，本质上是没有区别的，只是报文格式的不同。

get和post只是HTTP协议的两种请求方式，而HTTP是基于tcp/ip的应用层协议，无论get还是post，用的都是同一个传输层协议，所以在传输上，没有区别。

在HTTP协议中，method和data（URL、body、 header）是正交的两个概念。也就是说，使用哪个method与应用层的数据如何传输时没有关系的。

报文格式不同在于传递参数时，get参数写到url中，post参数写在请求体中，但是我们也可以post请求时将参数写到url中，get请求时将参数写到请求体中。

HTTP协议对get和post都没有穿度限制。HTTP协议明确的指出了，HTTP头和body都没有长度要求。IE浏览器对url长度限制是2083字节（2k+35），对于其他浏览器，如Netscape、Firefox等，理论上没有长度限制，其限制取决于操作系统。注意这个长度时整个url长度，而不仅仅是参数值的长度。

post比get安全，因为数据在地址栏上不可见。深层原因是，通过get提交数据，用户名和密码将明文出现在url上，因为登录页面有可能被浏览器缓存，其他人可以查看浏览器的历史记录，那么别人就可以拿到你的账号和密码了，除此之外，使用get提交数据还可能会造成cross-site request forgery攻击。



post和get的最本质区别主要是get请求时幂等性，post请求不是。

```
什么是幂等性？幂等性是指一次和多次请求某个资源应该具有同样的副作用。简单来说意味着对同一URL的多个请求应该返回同样的结果。
```



RFC7231里定义了HTTP方法的几个性质：

1. Safe - 安全
   这里的「安全」和通常理解的「安全」意义不同，如果一个方法的语义在本质上是「只读」的，那么这个方法就是安全的。客户端向服务端的资源发起的请求如果使用了是安全的方法，就不应该引起服务端任何的状态变化，因此也是无害的。 此RFC定义，GET, HEAD, OPTIONS 和 TRACE 这几个方法是安全的。
   但是这个定义只是规范，并不能保证方法的实现也是安全的，服务端的实现可能会不符合方法语义，正如上文说过的使用GET修改用户信息的情况。
   引入安全这个概念的目的是为了方便网络爬虫和缓存，以免调用或者缓存某些不安全方法时引起某些意外的后果。User Agent（浏览器）应该在执行安全和不安全方法时做出区分对待，并给用户以提示。
2. Idempotent - 幂等
   幂等的概念是指同一个请求方法执行多次和仅执行一次的效果完全相同。按照RFC规范，PUT，DELETE和安全方法都是幂等的。同样，这也仅仅是规范，服务端实现是否幂等是无法确保的。
   引入幂等主要是为了处理同一个请求重复发送的情况，比如在请求响应前失去连接，如果方法是幂等的，就可以放心地重发一次请求。这也是浏览器在后退/刷新时遇到POST会给用户提示的原因：POST语义不是幂等的，重复请求可能会带来意想不到的后果。
3. Cacheable - 可缓存性 顾名思义就是一个方法是否可以被缓存，此RFC里GET，HEAD和某些情况下的POST都是可缓存的，但是绝大多数的浏览器的实现里仅仅支持GET和HEAD。关于缓存的更多内容可以去看RFC7234。

在这三个特性里一直在强调同一个事情，那就是协议不等于实现：协议规定安全在实现里不一定安全，协议规定幂等在实现里不一定幂等，协议规定可缓存在实现里不一定可缓存。这其实就是上面那个作者提到的specification和implementation的关系。

勉强渣翻一下，再加上点自己的理解：

GET的语义是请求获取指定的资源。GET方法是安全、幂等、可缓存的（除非有 Cache-ControlHeader的约束）,GET方法的报文主体没有任何语义。

POST的语义是根据请求负荷（报文主体）对指定的资源做出处理，具体的处理方式视资源类型而不同。POST不安全，不幂等，（大部分实现）不可缓存。为了针对其不可缓存性，有一系列的方法来进行优化，以后有机会再研究（FLAG已经立起）。

还是举一个通俗栗子吧，在微博这个场景里，GET的语义会被用在「看看我的Timeline上最新的20条微博」这样的场景，而POST的语义会被用在「发微博、评论、点赞」这样的场景中。



### 3. 在浏览器中输入URL到整个页面显示在用户面前时这个过程中到底发生了什么。